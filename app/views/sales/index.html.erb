<%- model_class = Sale -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize.titleize %></h1>
</div>
<%= link_to t('.new', :default => t("helpers.links.new")),
            new_sale_path,
            :class => 'btn btn-primary' %>
<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:id) %></th>
      <th><%= model_class.human_attribute_name(:customer) %></th>
      <th><%= model_class.human_attribute_name(:season) %></th>
      <th><%= model_class.human_attribute_name(:departure_date) %></th>
      <th><%= model_class.human_attribute_name(:arrival_date) %></th>
      <th><%= model_class.human_attribute_name(:manifest) %></th>
      <th><%= model_class.human_attribute_name(:annotation) %></th>
      <th><%= model_class.human_attribute_name(:comment) %></th>
      <th><%= model_class.human_attribute_name(:created_at) %></th>
      <th><%= model_class.human_attribute_name(:state) %></th>
      <th><%= model_class.human_attribute_name(:next_event) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @sales.each do |sale| %>
      <tr>
        <td><%= sale.id %></td>
          <td><%= sale.customer.business_name %></td>
          <td><%= sale.season %></td>
          <td><%= sale.departure_date.to_formatted_s(:long) %></td>
          <td><%= sale.arrival_date.to_formatted_s(:long)%></td>
          <td><%= sale.manifest %></td>
          <td><%= sale.annotation %></td>
          <td><%= sale.comment %></td>
        <td><%=l sale.created_at, format: :long %></td>
          <td><%= sale.state %></td>
<!--states :carrier_courtyard_checkin, :courtyard_to_modules_line, :mexican_modules,
  :american_modules, :fda_inspection, :to_warehouse, :delivered, :payed-

<-- button_to [:make_happy, @user] do %>
  Make happy <strong><@user.name %></strong>
< end %>
-->
        <td><% if sale.state.to_s == "carrier_courtyard_checkin" %>
         <%= button_to "To modules line", { action: "to_modules_line",data: { sale_id: sale.id } }%>

         <% elsif sale.state.to_s == "courtyard_to_modules_line" %>
         <%= button_to "To Mexican modules", { action: "to_mexican_modules",data: { sale_id: sale.id } }%>


         <% elsif sale.state.to_s == "mexican_modules" %>

         <% elsif sale.state.to_s == "american_modules" %>

         <% elsif sale.state.to_s == "fda_inspection" %>

         <% elsif sale.state.to_s == "to_warehouse" %>

         <% elsif sale.state.to_s == "delivered" %>

         <% elsif sale.state.to_s == "payed" %>


          <% end %>

        </td>
        <td>
          <%= link_to sale_path(sale), :class => 'btn btn-xs', :title => "#{ t('.show', :default => t('helpers.links.show')) }" do %>
            <i class="fa fa-info fw"></i>
          <%- end -%>
          <%= link_to edit_sale_path(sale), :class => 'btn btn-xs', :title => "#{ t('.edit', :default => t('helpers.links.edit')) }" do %>
            <i class="fa fa-pencil fw"></i>
          <%- end -%>
          <%= link_to sale_path(sale), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-xs', :title => "#{ t('.destroy', :default => t('helpers.links.destroy')) }" do %>
            <i class="fa fa-trash-o fw"></i>
          <%- end -%>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>


