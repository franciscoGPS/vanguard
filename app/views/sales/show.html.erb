
<%- model_class = Sale -%>
<div class="page-header">
  <h1>
    <%=t '.title', :default => model_class.model_name.human.titleize %>
    <%= "#{@greenhouse.business_name.capitalize}" %>
  </h1>
</div>

<%= render :partial => "greenhouses/submenu", :locals => {:id => @greenhouse.id } %>
<div class="well">
  <%= link_to t('.back', :default => t("helpers.links.back")),
              greenhouse_path(@sale.greenhouse_id) , :class => "btn btn-warning"  %>
  <%=link_to 'Generar Orden de Compra.', purshase_order_path(@greenhouse.id, @sale.id), class: "btn btn-primary" %>
  <%=link_to 'Factura de cruce', customs_billing_path(@greenhouse.id, @sale.id), class: "btn btn-success" %>


  <% if @manifest %>
    <% @customers.each do |cust| %>
      <%= link_to "Facturar a "+ cust.business_name,
            new_greenhouse_sale_collections_bill_path(@greenhouse.id, @sale.id, :customer_id => cust.id), class: "btn btn-info" %>
    <% end %>
  <% end %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_greenhouse_sale_path(@sale.greenhouse_id, @sale.id), :class => 'btn btn-warning' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              greenhouse_sale_path(@sale.greenhouse_id, @sale.id),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger pull-right' %>
</div>
<div class="container">
  <div class="row col-sm-6">
    <div class="panel panel-default">
      <div class="panel-body">
        <div class="fieldset">
          <div class="row">
              <div class="col-md-4 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:shipment_number) %></dt>
                <dd><pre class="prettyprint"><%= "#{@sale.ship_number}" %></pre></dd>
              </div>
              <div class="col-md-4 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:season) %></dt>
                <dd><pre class="prettyprint"><%= "#{@sale.season}" %></pre></dd>
              </div>
              <div class="col-md-4 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:delivery_place) %></dt>
                <dd><pre class="prettyprint"><%= "#{@delivery_place.name}" %></pre></dd>
              </div>
              <div class="col-md-4 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:departure_date) %></dt>
                <dd><pre class="prettyprint"><%= "#{@sale.departure_date}" %></pre></dd>
              </div>
              <div class="col-md-4 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:arrival_date) %></dt>
                <dd><pre class="prettyprint"><%= "#{@sale.arrival_date}" %></pre></dd>
              </div>
              <div class="col-md-12 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:observations) %></dt>
                <dd><pre class="prettyprint"><%= "#{@sale.annotation}" %></pre></dd>
              </div>
          </div>

          <%= render :partial => 'confirmed_sales' %>
      </div>
    </div>
  </div>
</div>


    <div class="col-md-6">
      <h2 id="sale_id_status">Status</h2>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= hidden_field_tag(:sale_id_hidden, @sale.id)%>
            <%= label_tag("Orden de Compra") %>
            <%= check_box_tag(:purshase_order_state_check) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch ">
            <%= label_tag("Cuenta con Documentos") %>
            <%= check_box_tag(:documents) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("Salió de empaque") %>
            <%= check_box_tag(:out_of_packaging) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("Módulo aduana Mexicana") %>
            <%= check_box_tag(:mex_customs_mod) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("Rojo al pasar?") %>
            <%= check_box_tag(:revision) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("Módulo aduana Americana") %>
            <%= check_box_tag(:us_customs_mod) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("Recepción de documentos") %>
            <%= check_box_tag(:docs_reception) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("FDA") %>
            <%= check_box_tag(:fda) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
             <%= number_field_tag :hld_qty, 0, min: 0, :step => 'any', class: 'form-control', placeholder: "Cantidad:" %>
             <%= submit_tag "Guardar Cantidad", id: "save_qty", class: "btn btn-xs" %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("USDA") %>
            <%= check_box_tag(:usda) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("Rampa") %>
            <%= check_box_tag(:ramp) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("Documentacion de carga") %>
            <%= check_box_tag(:loading_docs) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("Llegó a bodega") %>
            <%= check_box_tag(:arrived_to_warehouse) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("Legó a frontera") %>
            <%= check_box_tag(:arrived_to_border) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("Recogió el cliente") %>
            <%= check_box_tag(:picked_up_by_cust) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("Salió del patio") %>
            <%= check_box_tag(:out_of_courtyard) %>
          </div>
          <div class="col-md-3 col-sm-5 col-xs-12 switch">
            <%= label_tag("BOL") %>
            <%= check_box_tag(:bol) %>
          </div>
        </div>

 </div>


  <div class="row">
     <%= render :partial => 'state_changes' %>
  </div>
  <%= javascript_include_tag "sales_state_machine.js" %>
  <%= content_for :stylesheets do %>
      <%= stylesheet_link_tag "sales_state_machine", :cache => true %>
  <% end %>
 </div>



