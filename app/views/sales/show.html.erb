
<%- model_class = Sale -%>
<div class="page-header">
  <h1>
    <%=t '.title', :default => model_class.model_name.human.titleize %>
    <%= "#{@greenhouse.business_name.capitalize}" %>
  </h1>
</div>

<%= render :partial => "greenhouses/submenu", :locals => {:id => @greenhouse.id } %>
<div class="well">
  <%= link_to t('.back', :default => t("helpers.links.back")),
              greenhouse_path(@sale.greenhouse_id) , :class => "btn btn-warning"  %>
  <%=link_to 'Generar Orden de Compra.', purshase_order_path(@greenhouse.id, @sale.id), class: "btn btn-primary" %>
  <%=link_to 'Factura de cruce', customs_billing_path(@greenhouse.id, @sale.id), class: "btn btn-success" %>


  <% if @manifest %>
    <% @customers.each do |cust| %>
      <%= link_to "Facturar a "+ cust.business_name,
            new_greenhouse_sale_collections_bill_path(@greenhouse.id, @sale.id, :customer_id => cust.id), class: "btn btn-info" %>
    <% end %>
  <% end %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_greenhouse_sale_path(@sale.greenhouse_id, @sale.id), :class => 'btn btn-warning' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              greenhouse_sale_path(@sale.greenhouse_id, @sale.id),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger pull-right' %>
</div>
<div class="container">
  <div class="row">
    <div class="panel panel-default">
      <div class="panel-body">
        <div class="fieldset">
          <dl class="row">
              <div class="col-md-4 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:shipment_number) %></dt>
                <dd><pre class="prettyprint"><%= "#{@sale.ship_number}" %></pre></dd>
              </div>
              <div class="col-md-4 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:season) %></dt>
                <dd><pre class="prettyprint"><%= "#{@sale.season}" %></pre></dd>
              </div>
              <div class="col-md-4 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:delivery_place) %></dt>
                <dd><pre class="prettyprint"><%= "#{@delivery_place.name}" %></pre></dd>
              </div>
              <div class="col-md-4 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:departure_date) %></dt>
                <dd><pre class="prettyprint"><%= "#{@sale.departure_date}" %></pre></dd>
              </div>
              <div class="col-md-4 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:arrival_date) %></dt>
                <dd><pre class="prettyprint"><%= "#{@sale.arrival_date}" %></pre></dd>
              </div>
              <div class="col-md-6 col-sm-12">
                <dt class="label label-default"><%= model_class.human_attribute_name(:observations) %></dt>
                <dd><pre class="prettyprint"><%= "#{@sale.annotation}" %></pre></dd>
              </div>
          </dl>

          <%= render :partial => 'confirmed_sales' %>
      </div>
    </div>
  </div>
</div>

 <div class="row">
   <div class="col-md-12">

        <%= hidden_field_tag(:sale_id_hidden, "#{@sale.id}")%>
        <h2 id="sale_id_status">Status</h2>
          <div class="col-md-3 col-sm-6">
              <%= label_tag "Orden de Compra", nil, class: "col-md-6" %>
              <%= check_box_tag :purshase_order_state_check, class: "col-md-6" %>
          </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "Cuenta con Documentos", nil, class: "col-md-6" %>
              <%= check_box_tag :documents, class: "col-md-6" %>
            </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "Salió de empaque", nil, class: "col-md-6" %>
              <%= check_box_tag :out_of_packaging, class: "col-md-6" %>
            </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "Módulo aduana Mexicana", nil, class: "col-md-6" %>
              <%= check_box_tag :mex_customs_mod, class: "col-md-6" %>
              <div class="col-md-12">
              <%= label_tag "Rojo al pasar?", nil, class: "col-md-6" %>
              <%= check_box_tag :revision, class: "col-md-6" %>
            </div>
          </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "Recepción de documentos", nil, class: "col-md-6" %>
              <%= check_box_tag :docs_reception, class: "col-md-6" %>
            </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "Módulo aduana Americana", nil, class: "col-md-6" %>
              <%= check_box_tag :us_customs_mod, class: "col-md-6" %>
            </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "USDA", nil, class: "col-md-6" %>
              <%= check_box_tag :usda, class: "col-md-6" %>
             </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "FDA", nil, class: "col-md-6" %>
              <%= check_box_tag :fda, class: "col-md-6" %>
            </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "Rampa", nil, class: "col-md-6" %>
              <%= check_box_tag :ramp, class: "col-md-6" %>
            </div>
          <div class="col-md-3 col-sm-6 form-group">
           <%= label_tag :cantidad, nil, class: "col-md-3 control-label" %>
             <div class=" col-md-8">
              <%= number_field_tag :hld_qty, class: "form-control" %>
            </div>
           <%= submit_tag "Save", id: "save_qty", class: "col-md-3 btn-xs" %>
          </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "Documentacion de carga", nil, class: "col-md-6" %>
              <%= check_box_tag :loading_docs, class: "col-md-6" %>
            </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "Llegó a bodega", nil, class: "col-md-6" %>
              <%= check_box_tag :arrived_to_warehouse, class: "col-md-6" %>
            </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "Legó a frontera", nil, class: "col-md-6" %>
              <%= check_box_tag :arrived_to_border, class: "col-md-6" %>
            </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "Recogió el cliente", nil, class: "col-md-6" %>
              <%= check_box_tag :picked_up_by_cust, class: "col-md-6" %>
            </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "Salió del patio", nil, class: "col-md-6" %>
              <%= check_box_tag :out_of_courtyard, class: "col-md-6" %>
            </div>
            <div class="col-md-3 col-sm-6">
              <%= label_tag "BOL", nil, class: "col-md-6" %>
              <%= check_box_tag :bol, class: "col-md-6" %>
            </div>
      </div>
 </div>


  <div class="row">
     <%= render :partial => 'state_changes' %>
  </div>
  <%= javascript_include_tag "sales_state_machine.js" %>
 </div>



